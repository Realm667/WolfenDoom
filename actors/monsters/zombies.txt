///////////////
//MAIN ACTORS//
///////////////

ACTOR Bones_Base
{
	Radius 1
	Height 1
	Mass 1
	Scale 0.65
	Projectile
	-ACTIVATEIMPACT
	-ACTIVATEPCROSS
	-NOGRAVITY
	+FORCEXYBILLBOARD
	+RANDOMIZE
	+ROLLCENTER
	+ROLLSPRITE
	BounceCount 3
	BounceFactor 0.7
	BounceType "Doom"
	WallBounceFactor 0.7
	Gravity 0.3
}

ACTOR Debris_Bone : Bones_Base //no skull
{
	States
	{
	Spawn:
		ZBON A 0 NODELAY A_Jump(256,"Set1","Set2","Set3","Set4","Set5","Set6","Set7")
		Set1:
		"####" A 1 {A_SetRoll(roll+random(15,30), SPF_INTERPOLATE); A_JumpIf(waterlevel == 3, "AdjustMass");}
		Loop
		Set2:
		"####" B 1 {A_SetRoll(roll-random(15,30), SPF_INTERPOLATE); A_JumpIf(waterlevel == 3, "AdjustMass");}
		Loop
		Set3:
		"####" C 1 {A_SetRoll(roll+random(15,30), SPF_INTERPOLATE); A_JumpIf(waterlevel == 3, "AdjustMass");}
		Loop
		Set4:
		"####" D 1 {A_SetRoll(roll-random(15,30), SPF_INTERPOLATE); A_JumpIf(waterlevel == 3, "AdjustMass");}
		Loop
		Set5:
		"####" E 1 {A_SetRoll(roll+random(15,30), SPF_INTERPOLATE); A_JumpIf(waterlevel == 3, "AdjustMass");}
		Loop
		Set6:
		"####" F 1 {A_SetRoll(roll-random(15,30), SPF_INTERPOLATE); A_JumpIf(waterlevel == 3, "AdjustMass");}
		Loop
		Set7:
		"####" G 1 {A_SetRoll(roll+random(15,30), SPF_INTERPOLATE); A_JumpIf(waterlevel == 3, "AdjustMass");}
		Loop
	AdjustMass:
		ZBON "#" 0 A_SetMass(750)
		Goto Swim
	Swim:
		ZBON A 0 A_Jump(256,"WSet1","WSet2","WSet3","WSet4","WSet5","WSet6","WSet7","WSet8")
		WSet1:
		"####" A 2 A_ScaleVelocity(0.7)
		"####" A 2 A_SpawnItemEx("Bubble", 0, 0, 0, 0, 0, 2, random (0, 360), 0, 128)
		Loop
		WSet2:
		"####" B 2 A_ScaleVelocity(0.7)
		"####" B 2 A_SpawnItemEx("Bubble", 0, 0, 0, 0, 0, 2, random (0, 360), 0, 128)
		Loop
		WSet3:
		"####" C 2 A_ScaleVelocity(0.7)
		"####" C 2 A_SpawnItemEx("Bubble", 0, 0, 0, 0, 0, 2, random (0, 360), 0, 128)
		Loop
		WSet4:
		"####" D 2 A_ScaleVelocity(0.7)
		"####" D 2 A_SpawnItemEx("Bubble", 0, 0, 0, 0, 0, 2, random (0, 360), 0, 128)
		Loop
		WSet5:
		"####" E 2 A_ScaleVelocity(0.7)
		"####" E 2 A_SpawnItemEx("Bubble", 0, 0, 0, 0, 0, 2, random (0, 360), 0, 128)
		Loop
		WSet6:
		"####" F 2 A_ScaleVelocity(0.7)
		"####" F 2 A_SpawnItemEx("Bubble", 0, 0, 0, 0, 0, 2, random (0, 360), 0, 128)
		Loop
		WSet7:
		"####" G 2 A_ScaleVelocity(0.7)
		"####" G 2 A_SpawnItemEx("Bubble", 0, 0, 0, 0, 0, 2, random (0, 360), 0, 128)
		Loop
	Death:
		ZBON "#" 0 {A_SetRoll(0); A_ChangeFlag("ROLLCENTER", FALSE); A_ChangeFlag("ROLLSPRITE", FALSE);}
		"####" "#" 0 A_Jump(256,"Death1")
		Stop
	Death1:
		ZBON "#" 0 A_ChangeFlag("BOUNCEONACTORS", FALSE)
		ZBON "#" 1 A_SetTics(35*CallACS("DebrisLifetime"))
		Death1Wait:
		"####" "#" 1 A_FadeOut(0.1)
		Wait
	}
}

ACTOR Debris_Skull : Bones_Base
{
	States
	{
	Spawn:
		ZBON H 1 {A_SetRoll(roll-random(15,30), SPF_INTERPOLATE); A_JumpIf(waterlevel == 3, "AdjustMass");}
		Loop
	AdjustMass:
		"####" H 0 A_SetMass(750)
		Goto Swim
	Swim:
		"####" H 2 A_ScaleVelocity(0.7)
		"####" H 2 A_SpawnItemEx("Bubble", 0, 0, 0, 0, 0, 2, random (0, 360), 0, 128)
		Loop
	Death:
		"####" H 0 {A_SetRoll(0); A_ChangeFlag("ROLLCENTER", FALSE); A_ChangeFlag("ROLLSPRITE", FALSE);}
		"####" "#" 0 A_Jump(256,"Death1")
		Stop
	Death1:
		"####" H 0 A_ChangeFlag("BOUNCEONACTORS", FALSE)
		"####" H 1 A_SetTics(35*CallACS("DebrisLifetime"))
		Death1Wait:
		"####" H 1 A_FadeOut(0.1)
		Wait
	}
}

ACTOR ZombieVomit
{
	Radius 8
	Height 8
	Speed 20
	FastSpeed 24
	Damage (random(3,8))
	Scale 0.7
	SeeSound "Blood/Spit"
	DeathSound "Blood/Impact"
	DamageType "UndeadPoison"
	Projectile
	Decal UndeadSmear
	States
	{
	Spawn:
		ZVOM A 0 A_SpawnItemEx("UndeadFlyingBloodTrail", 0, 0, 0, 1)
		ZVOM ABCDEF 1
		Loop
	Death:
		TNT1 A 0 BRIGHT A_SpawnProjectile("PoisonCloudUndead",16,0,0,2,0)
		"####" AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("UndeadFartCloud",random(-64,64),random(-64,64),random(-48,48),0,0,0.1,0,128)
		"####" AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("UndeadSmoke",random(-64,64),random(-64,64),random(-48,48),momx,0,frandom(0.5,1),0,SXF_TRANSFERTRANSLATION,160)
		"####" AAAAAAAAA 1 A_SpawnItemEx("UndeadFlyingBlood", random(2,-2), random(2,-2), random(2,2), random(1,6), random(1,6), random(1,6), random(0,360), SXF_CLIENTSIDE)
		Stop
	}
}

ACTOR UndeadFartCloud
{
	Game Doom
	Radius 2
	Height 2
	DamageType "UndeadPoison"
	+NOINTERACTION
	+WINDTHRUST
	RenderStyle "Translucent"
	Alpha 0.3
	States
	{
	Spawn:
		FUGZ ABCDE 2
	Fade:
		"####" ABCDE 2 A_FadeOut (0.05)
		"####" ABCDE 2 A_FadeIn (0.05)
		"####" ABCDE 2 A_FadeOut (0.05)
		"####" ABCDE 2 A_FadeIn (0.05)
		"####" ABCDE 2 A_FadeOut (0.05)
		"####" ABCDE 2 A_FadeIn (0.05)
		"####" ABCDE 2 A_FadeOut (0.05)
		"####" ABCDE 2 A_FadeIn (0.05)
		"####" ABCDE 2 A_FadeOut (0.05)
		Stop
	}
}

ACTOR UndeadSmoke : MutantSmoke { StencilColor "05 05 05" }

ACTOR PoisonCloudUndead
{
	Radius 20
	Height 30
	Reactiontime 2
	DamageType "UndeadPoison"
	RenderStyle "Translucent"
	Alpha 0.6
	+BLOCKEDBYSOLIDACTORS
	+BLOODLESSIMPACT
	+CANBLAST
	+DONTSPLASH
	+DONTTHRUST
	+DROPOFF
	+FOILINVUL
	+NOBLOCKMAP
	+NODAMAGETHRUST
	+NOGRAVITY
	States
	{
	Spawn:
		TNT1 A 1
		"####" A 4 A_Explode(3,64,0,0,96)
		"####" A 20 A_Countdown
		Loop
	Death:
		"####" A 7
		"####" A 6
		Stop
	}
}

///////////
//ZOMBIES//
///////////

ACTOR ZombieKazi : Nazi //Immune to poisonus damage
{
	//$Category Monsters (Wolf3D)/Occult
	//$Title Nazi Zombie, Kamikaze
	//$Color 4
	Health 100
	Speed 8
	PainChance 64
	DropItem "9mmAmmo" 64
	DropItem "GrenadePickup" 16
	Obituary "$NAZOKAZI"
	SeeSound "nazombie/sighted"
	PainSound "nazombie/pain"
	DeathSound "sscultist/die"
	BloodType "UndeadBlood"
	BloodColor "Black"
	DamageFactor MutantPoison, 0
	DamageFactor Poison, 0
	+NOVERTICALMELEERANGE
	States
	{
	Spawn:
		ZKAZ N 0
		Goto Look
	Melee:
		"####" E 0 A_Die
		Stop
	Missile:
		"####" E 0 A_JumpIfCloser(192,"Melee",TRUE)
		"####" EF 20 A_FaceTarget
		"####" G 0 A_PlaySound("nazombie/vomit", CHAN_WEAPON)
		"####" G 12 A_SpawnProjectile("ZombieVomit",54,0,0, CMF_AIMDIRECTION)
		"####" E 8
		Goto See
	XDeath: //what a fall through :P
	Death.Fire:
	Disintegrate:
	Death:
		"####" F 5
		"####" I 0 A_SpawnItemEx("ZombieNuke",0,0,0)
		"####" IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII 0 A_SpawnItemEx("Debris_Bone", random(8,-8), random(8,-8), random(54,64), random(1,6), random(1,6), random(1,6), random(0,360), SXF_CLIENTSIDE)
		"####" I 1 {A_SpawnItemEx("Debris_Skull", random(8,-8), random(8,-8), random(54,64), random(1,6), random(1,6), random(1,6), random(0,360), SXF_CLIENTSIDE); A_NoBlocking;}
		"####" JKLM 4
		"####" U -1 {A_UnSetSolid; A_SetFloorclip;}
		Stop
	}
}

ACTOR ZombieBrain : Nazi
{
	//$Category Monsters (Wolf3D)/Occult
	//$Title Nazi Zombie, Brain Eater
	//$Color 4
	Health 80
	Speed 2
	PainChance 64
	DropItem "9mmAmmo" 32
	Obituary "$NAZOBITE"
	SeeSound "nazombie/sighted"
	PainSound "nazombie/pain"
	DeathSound "sscultist/die"
	BloodType "UndeadBlood"
	BloodColor "Black"
	DamageFactor UndeadPoison, 0
	DamageFactor MutantPoison, 0
	DamageFactor Poison, 0
	+QUICKTORETALIATE
	Translation "16:47=[34,0,7]:[0,0,0]","168:191=[36,0,9]:[2,0,0]"
	States
	{
	Spawn:
		ZBIT N 0
		Goto Look
	See:
		"####" "#" 0 A_SetUserVar("user_incombat", TRUE)
		"####" "#" 0 A_JumpIfCloser (radius + 320, "Run")
		"####" "#" 0 A_SetSpeed(2)
		"####" A 1 A_Chase
		"####" AAA 1 A_Chase("","")
		"####" A 1 A_Chase
		"####" AAA 1 A_Chase("","")
		"####" B 1 A_Chase
		"####" B 0 A_SpawnItemEx("EnemyStep", 0, 0, 14, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		"####" BBB 1 A_Chase("","")
		"####" B 1 A_Chase
		"####" BBB 1 A_Chase("","")
		"####" C 1 A_Chase
		"####" CCC 1 A_Chase("","")
		"####" C 1 A_Chase
		"####" CCC 1 A_Chase("","")
		"####" D 1 A_Chase
		"####" D 0 A_SpawnItemEx("EnemyStep", 0, 0, 14, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		"####" DDD 1 A_Chase("","")
		"####" D 1 A_Chase
		"####" DDD 1 A_Chase("","")
		Loop
	Run:
		"####" "#" 0 {A_SetSpeed(6); A_PlaySound("nazombie/sighted", CHAN_ITEM);}
	RunLoop:
		"####" O 1 A_Chase
		"####" OOO 1 A_Chase("","")
		"####" O 1 A_Chase
		"####" OOO 1 A_Chase("","")
		"####" P 1 A_Chase
		"####" P 0 A_SpawnItemEx("EnemyStep", 0, 0, 14, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		"####" PPP 1 A_Chase("","")
		"####" P 1 A_Chase
		"####" PPP 1 A_Chase("","")
		"####" Q 1 A_Chase
		"####" QQQ 1 A_Chase("","")
		"####" Q 1 A_Chase
		"####" QQQ 1 A_Chase("","")
		"####" R 1 A_Chase
		"####" R 0 A_SpawnItemEx("EnemyStep", 0, 0, 14, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		"####" RRR 1 A_Chase("","")
		"####" R 1 A_Chase
		"####" RRR 1 A_Chase("","")
		Goto See
	Melee:
		"####" F 4 A_FaceTarget
		"####" G 0 A_PlaySound("nazombie/pain", CHAN_ITEM) //needs fitting sounds
		"####" G 5 A_CustomMeleeAttack(5*random(2,4))
		"####" F 4 A_FaceTarget
		"####" G 0 A_PlaySound("nazombie/pain", CHAN_ITEM) //needs fitting sounds
		"####" G 5 A_CustomMeleeAttack(5*random(2,4))
		Goto See
	Missile:
		"####" EF 20 A_FaceTarget
		"####" G 0 A_PlaySound("nazombie/vomit", CHAN_WEAPON)
		"####" G 12 A_SpawnProjectile("ZombieVomit",54,0,0, CMF_AIMDIRECTION)
		"####" E 8
		Goto See
	Pain:
		"####" F 6 A_NaziPain(256)
		"####" F 0 A_Jump(256,"See")
	XDeath:
	Death:
		"####" I 5
		"####" J 5 A_Scream
		"####" K 5 A_NoBlocking(!user_sneakable)
		"####" L 5
		"####" M -1
		Stop
	Death.Fire:
		TNT1 A 0 A_Jump(256,"Death.Fire.A","Death.Fire.B")
	Death.Fire.A:
		BURN A 5 BRIGHT LIGHT(ITBURNS1) {A_Wander; A_SetScale(0.55);}
		"####" BC 5 BRIGHT LIGHT(ITBURNS1) {A_Wander; A_SpawnItemEx("FloatingCinder", random(-8,8), random(-8,8), random(0,32), 1, 0, random (1, 3), random (0, 360), SXF_TRANSFERPITCH | SXF_CLIENTSIDE, 160);}
		"####" D 5 BRIGHT LIGHT(ITBURNS1) {A_Wander; A_PlaySound("death/burning");}
		"####" E 5 BRIGHT LIGHT(ITBURNS1) {A_Wander; A_SpawnItemEx("FloatingCinder", random(-8,8), random(-8,8), random(0,32), 1, 0, random (1, 3), random (0, 360), SXF_TRANSFERPITCH | SXF_CLIENTSIDE, 160);}
		"####" FABCD 5 BRIGHT LIGHT(ITBURNS2) {A_Wander; A_SpawnItemEx("FloatingCinder", random(-8,8), random(-8,8), random(0,32), 1, 0, random (1, 3), random (0, 360), SXF_TRANSFERPITCH | SXF_CLIENTSIDE, 160);}
		"####" EFAG 5 BRIGHT LIGHT(ITBURNS3) A_Wander
		"####" H 5 BRIGHT LIGHT(ITBURNS3) A_NoBlocking
		"####" IJK 5 BRIGHT LIGHT(ITBURNS2) A_SpawnItemEx("FloatingCinder", random(-8,8), random(-8,8), random(0,16), 1, 0, random (1, 3), random (0, 360), SXF_TRANSFERPITCH | SXF_CLIENTSIDE, 160)
		"####" LMN 5 BRIGHT LIGHT(ITBURNS1) A_SpawnItemEx("FloatingCinder", random(-8,8), random(-8,8), random(0,8), 1, 0, random (1, 3), random (0, 360), SXF_TRANSFERPITCH | SXF_CLIENTSIDE, 160)
		"####" O -1
		Stop
	Death.Fire.B:
		NRUB A 5 BRIGHT LIGHT(ITBURNS1) {A_Wander; A_SetScale(0.55);}
		"####" BC 5 BRIGHT LIGHT(ITBURNS1) {A_Wander; A_SpawnItemEx("FloatingCinder", random(-8,8), random(-8,8), random(0,32), 1, 0, random (1, 3), random (0, 360), SXF_TRANSFERPITCH | SXF_CLIENTSIDE, 160);}
		"####" D 5 BRIGHT LIGHT(ITBURNS1) {A_Wander; A_PlaySound("death/burning");}
		"####" E 5 BRIGHT LIGHT(ITBURNS1) {A_Wander; A_SpawnItemEx("FloatingCinder", random(-8,8), random(-8,8), random(0,32), 1, 0, random (1, 3), random (0, 360), SXF_TRANSFERPITCH | SXF_CLIENTSIDE, 160);}
		"####" FABCD 5 BRIGHT LIGHT(ITBURNS2) {A_Wander; A_SpawnItemEx("FloatingCinder", random(-8,8), random(-8,8), random(0,32), 1, 0, random (1, 3), random (0, 360), SXF_TRANSFERPITCH | SXF_CLIENTSIDE, 160);}
		"####" EFAG 5 BRIGHT LIGHT(ITBURNS3) A_Wander
		"####" H 5 BRIGHT LIGHT(ITBURNS3) A_NoBlocking
		"####" IJK 5 BRIGHT LIGHT(ITBURNS2) A_SpawnItemEx("FloatingCinder", random(-8,8), random(-8,8), random(0,16), 1, 0, random (1, 3), random (0, 360), SXF_TRANSFERPITCH | SXF_CLIENTSIDE, 160)
		"####" LMN 5 BRIGHT LIGHT(ITBURNS1) A_SpawnItemEx("FloatingCinder", random(-8,8), random(-8,8), random(0,8), 1, 0, random (1, 3), random (0, 360), SXF_TRANSFERPITCH | SXF_CLIENTSIDE, 160)
		"####" O -1
		Stop
	Raise:
		"####" MLKJI 5
		"####" I 0 A_Jump(256,"See")
		Stop
	Disintegrate:
		"####" H 0 A_Playsound("astrostein/guard_death")
		"####" H 5 A_Scream
		"####" H 0 A_NoBlocking
		"####" H 0 A_SpawnItemEx("BaseLine", random(16, -16), random(16, -16), random(0, 8), 0, 0, random(1,3), 0, 129, 0)
		"####" H 1 A_FadeOut(0.02)
		Goto Disintegrate+3
	}
}